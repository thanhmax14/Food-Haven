@model Repository.ViewModels.RecipeViewModels
<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8" />
    <title>Nest - Multipurpose eCommerce HTML Template</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="" />
    <meta property="og:type" content="" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="~/assets/imgs/theme/favicon.svg" />
    <!-- Template CSS -->
    <link rel="stylesheet" href="~/assets/css/main.css?v=6.0" />

    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />

    <script src="chrome-extension://mooikfkahbdckldjjndioackbalphokd/~/assets/prompt.js"></script>
    @Html.Raw(" <link href='https://cdn.jsdelivr.net/npm/@flaticon/flaticon-uicons/css/all/all.css' rel='stylesheet'>")

    <link rel="stylesheet" href="~/assets/js/gridjs/theme/mermaid.min.css">
    <link rel="shortcut icon" href="assets/images/favicon.ico">
    <!-- Plugins css -->
    <link href="assets/libs/dropzone/dropzone.css" rel="stylesheet" type="text/css" />
    <!-- Layout config Js -->
    <script src="assets/js/layout.js"></script>
    <!-- Bootstrap Css -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Icons Css -->
    <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <!-- App Css-->
    <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" />
    <!-- custom Css-->
    <link href="assets/css/custom.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/libs/quill/quill.snow.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/multi.js@0.5.1/multi.min.css">
    <!-- Icons Css -->
    <link href="~/assetsAdmin/css/icons.min.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <!-- Quick view -->

    @await Html.PartialAsync("_Header")
    <div class="page-content pt-30 pb-100">
        <div class="container">
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 m-auto">
                    <h1 class="heading-2 mb-10">Create Recipe Form</h1>
                    <form method="post" asp-action="CreateRecipe" asp-controller="Users" enctype="multipart/form-data">
                        <div class="card-body">
                            <div class="live-preview">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label asp-for="Title" class="form-label"></label>
                                            <input asp-for="Title" class="form-control" />
                                            <span asp-validation-for="Title" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label asp-for="Servings" class="form-label"></label>
                                            <input asp-for="Servings" class="form-control" />
                                            <span asp-validation-for="Servings" class="text-danger"></span>
                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                        <div class="mb-3">
                                            <label asp-for="ShortDescriptions" class="form-label"></label>
                                            <textarea asp-for="ShortDescriptions" class="form-control" rows="3"
                                                placeholder="Enter short description"></textarea>
                                            <span asp-validation-for="ShortDescriptions" class="text-danger"></span>
                                        </div>

                                    </div>

                                    @* <div class="col-md-6">
                        <div class="mb-3">
                            <label for="emailidInput" class="form-label">Recipes Made It
                                Count</label>
                            <input type="email" class="form-control" placeholder="Enter number" id="emailidInput"
                                name="MadeItCount" value="0" readonly>
                        </div>
                    </div> *@

                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="ForminputState" class="form-label">Category</label>
                                            <select id="ForminputState" class="form-select" data-choices
                                                data-choices-sorting="true" name="CateID" required>
                                                <option value="" selected>Choose...</option>
                                                @foreach (var item in Model.Categories)
                                                {
                                                    <option value="@item.ID">@item.Name</option>
                                                }
                                            </select>
                                            <span class="text-danger" data-valmsg-for="CateID"
                                                data-valmsg-replace="true"></span>


                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="ForminputState1" class="form-label">TypeOfDish</label>
                                            <select id="ForminputState1" class="form-select" data-choices
                                                data-choices-sorting="true" name="TypeOfDishID" required>
                                                <option value="" selected>Choose...</option>
                                                @foreach (var item in Model.typeOfDishes)
                                                {
                                                    <option value="@item.ID">@item.Name</option>
                                                }
                                            </select>
                                            <span class="text-danger" data-valmsg-for="TypeOfDishID"
                                                data-valmsg-replace="true"></span>


                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="ForminputState2" class="form-label">Difficulty
                                                Level</label>
                                            <select id="ForminputState2" class="form-select" data-choices
                                                data-choices-sorting="true" name="DifficultyLevel">
                                                <option selected>Choose...</option>
                                                <option value="Easy">Easy</option>
                                                <option value="Medium">Medium</option>
                                                <option value="Hard">Hard</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <!-- Hidden input ƒë·ªÉ g·ª≠i false n·∫øu checkbox kh√¥ng ƒë∆∞·ª£c ch·ªçn -->
                                        <input type="hidden" name="IsActive" value="true" />

                                        <!-- Checkbox s·∫Ω ghi ƒë√® gi√° tr·ªã n·∫øu ƒë∆∞·ª£c ch·ªçn -->
                                        <div class="form-check">
                                            <input asp-for="IsActive" class="form-check-input" type="checkbox"
                                                value="true" />

                                            <label class="form-check-label" asp-for="IsActive">Is Active</label>

                                        </div>
                                    </div>


                                    <div class="row">
                                        <!-- C·ªôt ph·∫£i: Ingredient Tag -->


                                        <div class="col-md-6 mb-3 h-100 d-flex flex-column">
                                            <input class="search-input" type="text" placeholder="Search..."
                                                title="Search..." id="searchAll">
                                            <label for="IngredientTags" class="form-label">Ingredient Tag</label>
                                            <select id="IngredientTags" name="SelectedIngredientTags[]"
                                                class="form-select" multiple style="display:none;">
                                                @foreach (var item in Model.IngredientTags)
                                                {
                                                    <option value="@item.ID">@item.Name</option>
                                                }

                                            </select>

                                            <div class="multi-select-container">
                                                <div class="multi-select-column">
                                                    <div class="header">Available</div>
                                                    <div class="items-list" id="availableList"></div>
                                                </div>

                                                <div class="multi-select-column">
                                                    <div class="header">Selected</div>
                                                    <div class="items-list" id="selectedList"></div>
                                                </div>
                                            </div>
                                        </div>


                                        <!-- C·ªôt tr√°i: 3 time input -->
                                        <div class="col-md-6">
                                            <!-- Preparation Time -->
                                            <div class="mb-3">
                                                <label class="form-label">Preparation Time</label>
                                                <div class="d-flex gap-2 align-items-center">
                                                    <input type="number" class="form-control" min="0"
                                                        placeholder="Enter time" name="PreparationValue"
                                                        style="width: 120px;" />
                                                    <select class="form-select" name="PreparationUnit"
                                                        style="width: 120px;">
                                                        <option value="minutes">Minutes</option>
                                                        <option value="hours">Hours</option>
                                                        <option value="days">Days</option>
                                                    </select>
                                                    <span class="text-muted">or</span>
                                                    <select class="form-select" name="PreparationQuick"
                                                        style="width: 150px;">
                                                        <option value="">Quick select</option>
                                                        <option value="5">5 min</option>
                                                        <option value="10">10 min</option>
                                                        <option value="15">15 min</option>
                                                        <option value="20">20 min</option>
                                                        <option value="30">30 min</option>
                                                        <option value="45">45 min</option>
                                                        <option value="60">1 hour</option>
                                                        <option value="120">2 hours</option>
                                                        <option value="180">3 hours</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <!-- Cooking Time -->
                                            <div class="mb-3">
                                                <label class="form-label">Cooking Time</label>
                                                <div class="d-flex gap-2 align-items-center">
                                                    <input type="number" class="form-control" min="0"
                                                        placeholder="Enter time" name="CookingValue"
                                                        style="width: 120px;" />
                                                    <select class="form-select" name="CookingUnit"
                                                        style="width: 120px;">
                                                        <option value="minutes">Minutes</option>
                                                        <option value="hours">Hours</option>
                                                        <option value="days">Days</option>
                                                    </select>
                                                    <span class="text-muted">or</span>
                                                    <select class="form-select" name="CookingQuick"
                                                        style="width: 150px;">
                                                        <option value="">Quick select</option>
                                                        <option value="5">5 min</option>
                                                        <option value="10">10 min</option>
                                                        <option value="15">15 min</option>
                                                        <option value="20">20 min</option>
                                                        <option value="30">30 min</option>
                                                        <option value="45">45 min</option>
                                                        <option value="60">1 hour</option>
                                                        <option value="120">2 hours</option>
                                                        <option value="180">3 hours</option>
                                                        <option value="240">4 hours</option>
                                                    </select>
                                                </div>



                                                <!-- Total Time -->
                                                <div class="mb-3">
                                                    <label class="form-label">Total Time</label>
                                                    <div class="form-control bg-light" id="displayTotalTime"
                                                        style="height: auto;">
                                                        0 minute
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div><!-- end inner row -->
                                </div><!-- end live-preview -->
                            </div><!-- end card-body -->
                            <input type="hidden" name="PreparationTime" id="hiddenPrepTime">
                            <input type="hidden" name="CookTime" id="hiddenCookTime">
                            <input type="hidden" name="TotalTime" id="hiddenTotalTime">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title mb-0">Ingredient</h4>
                                </div><!-- end card header -->

                                <div class="card-body">
                                    <div id="editor-Ingredient" class="snow-editor" style="height: 300px;">

                                    </div> <!-- end Snow-editor-->
                                </div><!-- end card-body -->
                            </div><!-- end card -->
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title mb-0">Cooking Step</h4>
                                </div>
                                <div class="card-body">
                                    <div id="editor-CookingStep" class="snow-editor" style="height: 300px;">
                                        <!-- Content here... -->
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label asp-for="ThumbnailImage" class="form-label">Upload Thumbnail Image</label>
                                <input asp-for="ThumbnailImage" class="form-control" type="file" accept="image/*"
                                    onchange="resizeAndPreviewImage(event)" />
                                <span asp-validation-for="ThumbnailImage" class="text-danger"></span>
                            </div>

                            <!-- Preview image -->
                            <img id="product-img" src="#" alt="Preview"
                                style="max-width: 100%; margin-top: 10px; display: none;" />





                        </div>
                        <input type="hidden" id="IngredientHidden" name="Ingredient" />
                        <input type="hidden" id="CookingStepHidden" name="CookingStep" />

                        <div class="mt-3">
                            <button type="submit" class="btn btn-sm btn-success">Submit Recipe</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <footer class="main">
        <section class="newsletter mb-15">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="position-relative newsletter-inner">
                            <div class="newsletter-content">
                                <h2 class="mb-20">
                                    Stay home & get your daily <br />
                                    needs from our shop
                                </h2>
                                <p class="mb-45">
                                    Start You'r Daily Shopping with <span class="text-brand">
                                        Nest
                                        Mart
                                    </span>
                                </p>
                                <form class="form-subcriber d-flex">
                                    <input type="email" placeholder="Your emaill address" />
                                    <button class="btn" type="submit">Subscribe</button>
                                </form>
                            </div>
                            <img src="~/assets/imgs/banner/banner-9.png" alt="newsletter" />
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="featured section-padding">
            <div class="container">
                <div class="row">
                    <div class="col-lg-1-5 col-md-4 col-12 col-sm-6 mb-md-4 mb-xl-0">
                        <div class="banner-left-icon d-flex align-items-center wow fadeIn animated">
                            <div class="banner-icon">
                                <img src="~/assets/imgs/theme/icons/icon-1.svg" alt="" />
                            </div>
                            <div class="banner-text">
                                <h3 class="icon-box-title">Best prices & offers</h3>
                                <p>Orders $50 or more</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-1-5 col-md-4 col-12 col-sm-6">
                        <div class="banner-left-icon d-flex align-items-center wow fadeIn animated">
                            <div class="banner-icon">
                                <img src="~/assets/imgs/theme/icons/icon-2.svg" alt="" />
                            </div>
                            <div class="banner-text">
                                <h3 class="icon-box-title">Free delivery</h3>
                                <p>24/7 amazing services</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-1-5 col-md-4 col-12 col-sm-6">
                        <div class="banner-left-icon d-flex align-items-center wow fadeIn animated">
                            <div class="banner-icon">
                                <img src="~/assets/imgs/theme/icons/icon-3.svg" alt="" />
                            </div>
                            <div class="banner-text">
                                <h3 class="icon-box-title">Great daily deal</h3>
                                <p>When you sign up</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-1-5 col-md-4 col-12 col-sm-6">
                        <div class="banner-left-icon d-flex align-items-center wow fadeIn animated">
                            <div class="banner-icon">
                                <img src="~/assets/imgs/theme/icons/icon-4.svg" alt="" />
                            </div>
                            <div class="banner-text">
                                <h3 class="icon-box-title">Wide assortment</h3>
                                <p>Mega Discounts</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-1-5 col-md-4 col-12 col-sm-6">
                        <div class="banner-left-icon d-flex align-items-center wow fadeIn animated">
                            <div class="banner-icon">
                                <img src="~/assets/imgs/theme/icons/icon-5.svg" alt="" />
                            </div>
                            <div class="banner-text">
                                <h3 class="icon-box-title">Easy returns</h3>
                                <p>Within 30 days</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-1-5 col-md-4 col-12 col-sm-6 d-xl-none">
                        <div class="banner-left-icon d-flex align-items-center wow fadeIn animated">
                            <div class="banner-icon">
                                <img src="~/assets/imgs/theme/icons/icon-6.svg" alt="" />
                            </div>
                            <div class="banner-text">
                                <h3 class="icon-box-title">Safe delivery</h3>
                                <p>Within 30 days</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="section-padding footer-mid">
            <div class="container pt-15 pb-20">
                <div class="row">
                    <div class="col">
                        <div class="widget-about font-md mb-md-3 mb-lg-3 mb-xl-0">
                            <div class="logo mb-30">
                                <a href="/" class="mb-15">
                                    <img src="~/assets/imgs/theme/logo.svg" alt="logo" />
                                </a>
                                <p class="font-lg text-heading">Awesome grocery store website template</p>
                            </div>
                            <ul class="contact-infor">
                                <li>
                                    <img src="~/assets/imgs/theme/icons/icon-location.svg" alt="" /><strong>
                                        Address:
                                    </strong> <span>5171 W Campbell Ave undefined Kent, Utah 53127 United States</span>
                                </li>
                                <li>
                                    <img src="~/assets/imgs/theme/icons/icon-contact.svg" alt="" /><strong>
                                        Call
                                        Us:
                                    </strong><span>(+91) - 540-025-124553</span>
                                </li>
                                <li>
                                    <img src="~/assets/imgs/theme/icons/icon-email-2.svg"
                                        alt="" /><strong>Email:</strong><span>sale@Nest.com</span>
                                </li>
                                <li>
                                    <img src="~/assets/imgs/theme/icons/icon-clock.svg"
                                        alt="" /><strong>Hours:</strong><span>10:00 - 18:00, Mon - Sat</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-link-widget col">
                        <h4 class="widget-title">Company</h4>
                        <ul class="footer-list mb-sm-5 mb-md-0">
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Delivery Information</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Terms &amp; Conditions</a></li>
                            <li><a href="#">Contact Us</a></li>
                            <li><a href="#">Support Center</a></li>
                            <li><a href="#">Careers</a></li>
                        </ul>
                    </div>
                    <div class="footer-link-widget col">
                        <h4 class="widget-title">Account</h4>
                        <ul class="footer-list mb-sm-5 mb-md-0">
                            <li><a href="#">Sign In</a></li>
                            <li><a href="#">View Cart</a></li>
                            <li><a href="#">My Wishlist</a></li>
                            <li><a href="#">Track My Order</a></li>
                            <li><a href="#">Help Ticket</a></li>
                            <li><a href="#">Shipping Details</a></li>
                            <li><a href="#">Compare products</a></li>
                        </ul>
                    </div>
                    <div class="footer-link-widget col">
                        <h4 class="widget-title">Corporate</h4>
                        <ul class="footer-list mb-sm-5 mb-md-0">
                            <li><a href="#">Become a Vendor</a></li>
                            <li><a href="#">Affiliate Program</a></li>
                            <li><a href="#">Farm Business</a></li>
                            <li><a href="#">Farm Careers</a></li>
                            <li><a href="#">Our Suppliers</a></li>
                            <li><a href="#">Accessibility</a></li>
                            <li><a href="#">Promotions</a></li>
                        </ul>
                    </div>
                    <div class="footer-link-widget col">
                        <h4 class="widget-title">Popular</h4>
                        <ul class="footer-list mb-sm-5 mb-md-0">
                            <li><a href="#">Milk & Flavoured Milk</a></li>
                            <li><a href="#">Butter and Margarine</a></li>
                            <li><a href="#">Eggs Substitutes</a></li>
                            <li><a href="#">Marmalades</a></li>
                            <li><a href="#">Sour Cream and Dips</a></li>
                            <li><a href="#">Tea & Kombucha</a></li>
                            <li><a href="#">Cheese</a></li>
                        </ul>
                    </div>
                    <div class="footer-link-widget widget-install-app col">
                        <h4 class="widget-title">Install App</h4>
                        <p class="wow fadeIn animated">From App Store or Google Play</p>
                        <div class="download-app">
                            <a href="#" class="hover-up mb-sm-2 mb-lg-0">
                                <img class="active" src="~/assets/imgs/theme/app-store.jpg" alt="" />
                            </a>
                            <a href="#" class="hover-up mb-sm-2">
                                <img src="~/assets/imgs/theme/google-play.jpg" alt="" />
                            </a>
                        </div>
                        <p class="mb-20">Secured Payment Gateways</p>
                        <img class="wow fadeIn animated" src="~/assets/imgs/theme/payment-method.png" alt="" />
                    </div>
                </div>
            </div>
        </section>
        <div class="container pb-30">
            <div class="row align-items-center">
                <div class="col-12 mb-30">
                    <div class="footer-bottom"></div>
                </div>
                <div class="col-xl-4 col-lg-6 col-md-6">
                    <p class="font-sm mb-0">
                        &copy; 2024, <strong class="text-brand">Nest</strong> - HTML Ecommerce
                        Template <br />All rights reserved
                    </p>
                </div>
                <div class="col-xl-4 col-lg-6 text-center d-none d-xl-block">
                    <div class="hotline d-lg-inline-flex mr-30">
                        <img src="~/assets/imgs/theme/icons/phone-call.svg" alt="hotline" />
                        <p>1900 - 6666<span>Working 8:00 - 22:00</span></p>
                    </div>
                    <div class="hotline d-lg-inline-flex">
                        <img src="~/assets/imgs/theme/icons/phone-call.svg" alt="hotline" />
                        <p>1900 - 8888<span>24/7 Support Center</span></p>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-6 col-md-6 text-end d-none d-md-block">
                    <div class="mobile-social-icon">
                        <h6>Follow Us</h6>
                        <a href="#"><img src="~/assets/imgs/theme/icons/icon-facebook-white.svg" alt="" /></a>
                        <a href="#"><img src="~/assets/imgs/theme/icons/icon-twitter-white.svg" alt="" /></a>
                        <a href="#"><img src="~/assets/imgs/theme/icons/icon-instagram-white.svg" alt="" /></a>
                        <a href="#"><img src="~/assets/imgs/theme/icons/icon-pinterest-white.svg" alt="" /></a>
                        <a href="#"><img src="~/assets/imgs/theme/icons/icon-youtube-white.svg" alt="" /></a>
                    </div>
                    <p class="font-sm">Up to 15% discount on your first subscribe</p>
                </div>
            </div>
        </div>
    </footer>
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="text-center">
                    <img src="~/assets/imgs/theme/loading.gif" alt="" />
                </div>
            </div>
        </div>
    </div>
    <!-- ‚úÖ jQuery (lu√¥n ph·∫£i ƒë·ª©ng tr∆∞·ªõc c√°c plugin d√πng jQuery) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="~/assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>

    <!-- ‚úÖ Bootstrap 5 -->
    @* <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"> *@
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ‚úÖ Quill (d√πng cho tr√¨nh so·∫°n th·∫£o) -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

    <!-- ‚úÖ multi.js -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/multi.js@0.5.0/multi.min.css">

    <!-- ‚úÖ autoComplete.js -->

    <!-- ‚úÖ C√°c plugin kh√°c -->
    <script src="~/assets/js/plugins/slick.js"></script>
    <script src="~/assets/js/plugins/jquery.syotimer.min.js"></script>
    <script src="~/assets/js/plugins/wow.js"></script>
    <script src="~/assets/js/plugins/perfect-scrollbar.js"></script>
    <script src="~/assets/js/plugins/magnific-popup.js"></script>
    <script src="~/assets/js/plugins/select2.min.js"></script>
    <script src="~/assets/js/plugins/waypoints.js"></script>
    <script src="~/assets/js/plugins/counterup.js"></script>
    <script src="~/assets/js/plugins/jquery.countdown.min.js"></script>
    <script src="~/assets/js/plugins/images-loaded.js"></script>
    <script src="~/assets/js/plugins/isotope.js"></script>
    <script src="~/assets/js/plugins/scrollup.js"></script>
    <script src="~/assets/js/plugins/jquery.vticker-min.js"></script>
    <script src="~/assets/js/plugins/jquery.theia.sticky.js"></script>
    <script src="~/assets/js/plugins/jquery.elevatezoom.js"></script>

    <!-- ‚úÖ Template JS -->
    <script src="~/assets/js/main.js?v=6.0"></script>
    <script src="~/assets/js/shop.js?v=6.0"></script>

    <!-- ‚úÖ Grid.js -->
    <script src="~/assets/js/gridjs/gridjs.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

    <!-- ‚úÖ Admin Template (n·∫øu d√πng layout ri√™ng cho admin) -->
    <script src="assetsAdmin/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assetsAdmin/libs/simplebar/simplebar.min.js"></script>
    <script src="assetsAdmin/libs/node-waves/waves.min.js"></script>
    <script src="assetsAdmin/libs/feather-icons/feather.min.js"></script>
    <script src="assetsAdmin/js/pages/plugins/lord-icon-2.1.0.js"></script>
    <script src="assetsAdmin/js/plugins.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/multi.js@0.5.1/multi.min.js"></script>



    <!-- Dropzone (n·∫øu d√πng) -->
    <script src="assetsAdmin/libs/dropzone/dropzone-min.js"></script>

    <!-- Prism (code highlight) -->
    <script src="assetsAdmin/libs/prismjs/prism.js"></script>

    <!-- Qu·∫£n l√Ω n·ªôi dung n√¢ng cao -->
    <script src="assetsAdmin/js/pages/form-input-spin.init.js"></script>
    <script src="assetsAdmin/js/pages/flag-input.init.js"></script>

    <!-- Kh·ªüi t·∫°o Quill ho·∫∑c form n√¢ng cao -->
    <script src="assetsAdmin/js/pages/form-editor.init.js"></script>

    <!-- ‚úÖ Quill n·∫øu d√πng b·∫£n local -->
    <!-- <script src="assetsAdmin/libs/quill/quill.min.js"></script> -->

    <!-- Admin app -->
    <script src="assetsAdmin/js/app.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Initialize Quill editors
            const editorIngredient = new Quill('#editor-Ingredient', {
                theme: 'snow',
                modules: {
                    toolbar: [
                        [{ 'font': [] }, { 'size': [] }],
                        ['bold', 'italic', 'underline', 'strike'],
                        [{ 'color': [] }, { 'background': [] }],
                        [{ 'script': 'super' }, { 'script': 'sub' }],
                        [{ 'header': [1, 2, 3, 4, 5, 6, false] }],
                        ['blockquote', 'code-block'],
                        [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                        [{ 'align': [] }],
                        [{ 'indent': '-1' }, { 'indent': '+1' }],
                        [{ 'direction': 'rtl' }],
                        ['link', 'image', 'video'],
                        ['clean']
                    ]
                }
            });

            const editorCookingStep = new Quill('#editor-CookingStep', {
                theme: 'snow',
                modules: {
                    toolbar: [
                        [{ 'font': [] }, { 'size': [] }],
                        ['bold', 'italic', 'underline', 'strike'],
                        [{ 'color': [] }, { 'background': [] }],
                        [{ 'script': 'super' }, { 'script': 'sub' }],
                        [{ 'header': [1, 2, 3, 4, 5, 6, false] }],
                        ['blockquote', 'code-block'],
                        [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                        [{ 'align': [] }],
                        [{ 'indent': '-1' }, { 'indent': '+1' }],
                        [{ 'direction': 'rtl' }],
                        ['link', 'image', 'video'],
                        ['clean']
                    ]
                }
            });

            // Find form and add submit event listener
            const form = document.querySelector("form");
            console.log("Form found:", form); // Debug log

            if (form) {
                form.addEventListener("submit", function (e) {
                    console.log("Form submit event triggered!");

                    // Prevent default submission temporarily
                    e.preventDefault();

                    try {
                        // Get content from editors
                        const ingredientContent = editorIngredient.root.innerHTML;
                        const cookingStepContent = editorCookingStep.root.innerHTML;

                        console.log("Ingredient content:", ingredientContent);
                        console.log("CookingStep content:", cookingStepContent);

                        // Find hidden inputs
                        const ingredientHidden = document.getElementById("IngredientHidden");
                        const cookingStepHidden = document.getElementById("CookingStepHidden");

                        if (ingredientHidden && cookingStepHidden) {
                            // Set values to hidden inputs
                            ingredientHidden.value = ingredientContent;
                            cookingStepHidden.value = cookingStepContent;

                            console.log("Hidden input values set:");
                            console.log("Ingredient hidden value:", ingredientHidden.value);
                            console.log("CookingStep hidden value:", cookingStepHidden.value);

                            // Now submit the form
                            form.submit();
                        } else {
                            console.error("Hidden inputs not found!");
                            alert("Error: Could not find hidden input fields!");
                        }
                    } catch (error) {
                        console.error("Error in form submission:", error);
                        alert("An error occurred while preparing the form data.");
                    }
                });
            } else {
                console.error("Form not found!");
            }

            // Alternative approach: Update hidden fields on editor content change
            editorIngredient.on('text-change', function () {
                const ingredientHidden = document.getElementById("IngredientHidden");
                if (ingredientHidden) {
                    ingredientHidden.value = editorIngredient.root.innerHTML;
                }
            });

            editorCookingStep.on('text-change', function () {
                const cookingStepHidden = document.getElementById("CookingStepHidden");
                if (cookingStepHidden) {
                    cookingStepHidden.value = editorCookingStep.root.innerHTML;
                }
            });
        });
    </script>
    <script>
        // Show/hide custom inputs and handle quick select
        document.querySelector('select[name="PreparationQuick"]').addEventListener('change', function () {
            if (this.value) {
                const prepValue = document.querySelector('input[name="PreparationValue"]');
                const prepUnit = document.querySelector('select[name="PreparationUnit"]');

                if (parseInt(this.value) >= 60) {
                    prepValue.value = parseInt(this.value) / 60;
                    prepUnit.value = 'hours';
                } else {
                    prepValue.value = this.value;
                    prepUnit.value = 'minutes';
                }
            }
            calculateTotal();
        });

        document.querySelector('select[name="CookingQuick"]').addEventListener('change', function () {
            if (this.value) {
                const cookValue = document.querySelector('input[name="CookingValue"]');
                const cookUnit = document.querySelector('select[name="CookingUnit"]');

                if (parseInt(this.value) >= 60) {
                    cookValue.value = parseInt(this.value) / 60;
                    cookUnit.value = 'hours';
                } else {
                    cookValue.value = this.value;
                    cookUnit.value = 'minutes';
                }
            }
            calculateTotal();
        });

        // Listen for changes in inputs
        document.querySelector('input[name="PreparationValue"]').addEventListener('input', calculateTotal);
        document.querySelector('select[name="PreparationUnit"]').addEventListener('change', calculateTotal);
        document.querySelector('input[name="CookingValue"]').addEventListener('input', calculateTotal);
        document.querySelector('select[name="CookingUnit"]').addEventListener('change', calculateTotal);

        function getCustomTimeInMinutes(value, unit) {
            if (!value) return 0;

            const val = parseFloat(value);
            switch (unit) {
                case 'minutes': return val;
                case 'hours': return val * 60;
                case 'days': return val * 24 * 60;
                default: return val;
            }
        }

        // TH√äM FUNCTION calculateTotal() - QUAN TR·ªåNG NH·∫§T
        function calculateTotal() {
            const prepValue = document.querySelector('input[name="PreparationValue"]').value;
            const prepUnit = document.querySelector('select[name="PreparationUnit"]').value;
            const prepQuick = document.querySelector('select[name="PreparationQuick"]').value;

            const cookValue = document.querySelector('input[name="CookingValue"]').value;
            const cookUnit = document.querySelector('select[name="CookingUnit"]').value;
            const cookQuick = document.querySelector('select[name="CookingQuick"]').value;

            let prepMinutes = 0;
            if (prepQuick && !prepValue) {
                prepMinutes = parseInt(prepQuick);
            } else if (prepValue) {
                prepMinutes = getCustomTimeInMinutes(prepValue, prepUnit);
            }

            let cookMinutes = 0;
            if (cookQuick && !cookValue) {
                cookMinutes = parseInt(cookQuick);
            } else if (cookValue) {
                cookMinutes = getCustomTimeInMinutes(cookValue, cookUnit);
            }

            const totalMinutes = prepMinutes + cookMinutes;

            const prepTimeString = formatTimeForDatabase(prepMinutes);
            const cookTimeString = formatTimeForDatabase(cookMinutes);
            const totalTimeString = formatTimeForDatabase(totalMinutes);

            document.getElementById('hiddenPrepTime').value = prepTimeString;
            document.getElementById('hiddenCookTime').value = cookTimeString;
            document.getElementById('hiddenTotalTime').value = totalTimeString;

            // üëâ C·∫≠p nh·∫≠t hi·ªÉn th·ªã l√™n giao di·ªán
            document.getElementById('displayTotalTime').textContent = totalTimeString || '0 minute';

            console.log('Calculated times:', {
                prepMinutes,
                cookMinutes,
                totalMinutes,
                prepTimeString,
                cookTimeString,
                totalTimeString
            });
        }


        // TH√äM FUNCTION formatTimeForDatabase()
        function formatTimeForDatabase(totalMinutes) {
            if (totalMinutes <= 0) return "";

            const days = Math.floor(totalMinutes / (24 * 60));
            const hours = Math.floor((totalMinutes % (24 * 60)) / 60);
            const minutes = Math.floor(totalMinutes % 60);

            let parts = [];
            if (days > 0) parts.push(`${days} day${days > 1 ? 's' : ''}`);
            if (hours > 0) parts.push(`${hours} hour${hours > 1 ? 's' : ''}`);
            if (minutes > 0) parts.push(`${minutes} minute${minutes > 1 ? 's' : ''}`);

            return parts.join(' ');
        }

        // Ch·∫°y calculateTotal() khi trang load
        document.addEventListener('DOMContentLoaded', function () {
            calculateTotal();
        });
    </script>
    <script>
        function resizeAndPreviewImage(event) {
            const input = event.target;
            const file = input.files[0];

            if (!file) return;

            const reader = new FileReader();
            reader.onload = function (e) {
                const img = new Image();
                img.src = e.target.result;

                img.onload = function () {
                    // T·∫°o canvas ƒë·ªÉ resize
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');

                    canvas.width = 1280;
                    canvas.height = 720;

                    // V·∫Ω ·∫£nh ƒë√£ resize l√™n canvas
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                    // L·∫•y ·∫£nh ƒë√£ resize t·ª´ canvas
                    const resizedDataUrl = canvas.toDataURL('image/jpeg');

                    // G√°n ·∫£nh preview
                    const preview = document.getElementById('product-img');
                    preview.src = resizedDataUrl;
                    preview.style.display = 'block';

                    // N·∫øu b·∫°n mu·ªën g·ª≠i ·∫£nh resize n√†y l√™n server thay v√¨ ·∫£nh g·ªëc
                    // b·∫°n c·∫ßn l∆∞u l·∫°i resizedDataUrl ho·∫∑c chuy·ªÉn n√≥ th√†nh Blob ƒë·ªÉ ƒë√≠nh k√®m trong FormData
                    // C√≥ th·ªÉ x·ª≠ l√Ω b·∫±ng JavaScript AJAX ho·∫∑c g·∫Øn v√†o hidden input n·∫øu d√πng form truy·ªÅn th·ªëng
                };
            };

            reader.readAsDataURL(file);
        }
    </script>

    <style>
        .multi-select-container {
            border: 1px solid #ccc;
            display: flex;
            gap: 10px;
            font-family: Arial, sans-serif;
        }

        .multi-select-column {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .multi-select-column .header {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .search-input {
            width: 100%;
            box-sizing: border-box;
            border: 1px solid #ced4da !important;
            border-radius: 6px;
            padding: 8px 12px;
            background-color: #fff;
            outline: none;
            box-shadow: none;
            margin-bottom: 10px;
        }

        .items-list {
            border: 1px solid #ccc;
            height: 250px;
            overflow-y: auto;
        }

        .item {
            padding: 5px;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .item:hover {
            background-color: #eee;
        }

        .item.selected {
            background-color: #2f00ff;
            color: white;
            border-color: #007bff;
        }
    </style>


    <script>
        // T·∫•t c·∫£ tags t·ª´ server truy·ªÅn xu·ªëng d∆∞·ªõi d·∫°ng JSON
        const allItems = @Html.Raw(Json.Serialize(Model.IngredientTags.Select(t => new { id = t.ID, name = t.Name })));
        let selectedItems = @Html.Raw(Json.Serialize(Model.SelectedIngredientTags));

        function renderLists() {
            const availableList = document.getElementById('availableList');
            const selectedList = document.getElementById('selectedList');
            const selectElement = document.getElementById('IngredientTags');
            const searchVal = document.getElementById('searchAll').value.toLowerCase();

            availableList.innerHTML = '';
            selectedList.innerHTML = '';
            selectElement.innerHTML = '';

            allItems.forEach(item => {
                const isSelected = selectedItems.includes(item.id);
                const matchSearch = item.name.toLowerCase().includes(searchVal);

                if (matchSearch) {
                    const div = document.createElement('div');
                    div.textContent = item.name;
                    div.className = 'item ' + (isSelected ? 'selected' : '');
                    div.style.cursor = 'pointer';
                    div.onclick = () => {
                        if (isSelected) {
                            selectedItems = selectedItems.filter(id => id !== item.id);
                        } else {
                            selectedItems.push(item.id);
                        }
                        renderLists(); // Re-render
                    };

                    if (isSelected) {
                        selectedList.appendChild(div);
                    } else {
                        availableList.appendChild(div);
                    }
                }

                // ƒê·ªìng b·ªô select ·∫©n
                if (isSelected) {
                    const opt = document.createElement('option');
                    opt.value = item.id;
                    opt.selected = true;
                    selectElement.appendChild(opt);
                }
            });
        }

        document.getElementById('searchAll').addEventListener('input', renderLists);
        renderLists();
    </script>

</body>

</html>
